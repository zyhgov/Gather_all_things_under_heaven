<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>è¥„é˜³èŒä¸šæŠ€æœ¯å­¦é™¢å¸ˆèµ„é˜Ÿä¼</title>
    <meta name="description" content="è¥„é˜³èŒä¸šæŠ€æœ¯å­¦é™¢åŒ»å­¦é™¢ç‹ä¼Ÿæ•™æˆçš„ä¸ªäººä¸»é¡µï¼Œä¸´åºŠåŒ»å­¦æ•™æˆã€åšå£«ç”Ÿå¯¼å¸ˆï¼Œå­¦ç§‘å¸¦å¤´äººï¼Œå›½å®¶çº§æ•™æä¸»ç¼–ã€‚ä¸»æŒå›½å®¶è‡ªç„¶ç§‘å­¦åŸºé‡‘é¡¹ç›®3é¡¹ï¼Œåœ¨ã€Šæ–°è‹±æ ¼å…°åŒ»å­¦æ‚å¿—ã€‹å‘è¡¨SCIè®ºæ–‡23ç¯‡ã€‚">
    <meta name="keywords" content="è¥„é˜³èŒä¸šæŠ€æœ¯å­¦é™¢,åŒ»å­¦é™¢æ•™æˆ,ä¸´åºŠåŒ»å­¦ä¸“å®¶,åšå£«ç”Ÿå¯¼å¸ˆ,å­¦ç§‘å¸¦å¤´äºº,ç‹ä¼Ÿ,åŒ»å­¦æ•™è‚²,ç§‘ç ”é¡¹ç›®">
    <meta name="author" content="è¥„é˜³èŒä¸šæŠ€æœ¯å­¦é™¢ä¿¡æ¯ä¸­å¿ƒ">
    <!-- Open Graph åè®® -->
    <meta property="og:type" content="profile">
    <meta property="og:title" content="ç‹ä¼Ÿæ•™æˆ - è¥„é˜³èŒä¸šæŠ€æœ¯å­¦é™¢åŒ»å­¦é™¢ä¸´åºŠåŒ»å­¦ç³»ä¸»ä»»">
    <meta property="og:description" content="ä¸´åºŠåŒ»å­¦æ•™æˆã€åšå£«ç”Ÿå¯¼å¸ˆï¼Œå›½å®¶çº§æ•™æä¸»ç¼–ï¼Œä¸»æŒå›½å®¶è‡ªç„¶ç§‘å­¦åŸºé‡‘é¡¹ç›®3é¡¹ï¼Œç´¯è®¡ç§‘ç ”ç»è´¹è¶…800ä¸‡å…ƒ">
    <meta property="og:image" content="https://zyhorg.ac.cn/XYTC_teacher/img/teachers/yulongbao.jpg">
    <meta property="og:url" content="https://zyhorg.ac.cn/XYTC_teacher/teacher_info/ceshi.html">
    <meta property="og:site_name" content="è¥„é˜³èŒä¸šæŠ€æœ¯å­¦é™¢">
    <!-- è§„èŒƒé“¾æ¥ -->
    <link rel="canonical" href="https://www.xyvtc.edu.cn/teachers/wangwei.html">
    <!-- ç½‘ç«™å›¾æ ‡ -->
    <link rel="icon" type="image/png" sizes="32x32" href="/favicon.ico">
    <link rel="icon" type="image/png" sizes="16x16" href="/favicon.ico">
    <link rel="apple-touch-icon" sizes="180x180" href="../img/apple-touch-icon.png">
    <!-- é¢„åŠ è½½å…³é”®èµ„æº -->
    <link rel="preload" href="../font/PingFangSC-Semibold.woff2" as="font" type="font/woff2" crossorigin>
    <script src="https://cdn.tailwindcss.com"></script>
    <link rel="stylesheet" href="./all.css">
</head>
<body class="bg-[var(--text-secondary)]">
    <!-- åœ¨bodyå¼€å¤´æ·»åŠ åŠ è½½çŠ¶æ€ -->
    <div id="loadingOverlay" class="fixed inset-0 z-[9999] flex flex-col items-center justify-center">
        <div class="loader-container relative mb-4">
            <div class="gradient-circle"></div>
            <div class="absolute inset-0 flex items-center justify-center">
                <img src="./img/ç»¿è‰²é€æ˜æ ¼å¼.png" alt="" class="w-12 h-12">
            </div>
        </div>
        <div class="loading-text font-medium">æ•™å¸ˆæ•°æ®åŠ è½½ä¸­</div>
    </div>
    <!-- å¯¼èˆªæ  -->
    <nav class="fixed top-0 w-full bg-white/80 backdrop-blur-md border-b border-neutral-200 z-50">
        <div class="max-w-7xl mx-auto px-4">
            <div class="flex justify-between items-center h-16">
                <img src="./img/ç»¿è‰²å…¨éƒ¨é€æ˜æ ¼å¼.png" alt="æ ¡å¾½" class="h-12 w-auto">
                <div class="hidden md:flex space-x-8">
                    <a href="#" class="nav-link">é¦–é¡µ</a>
                    <a href="#" class="nav-link">å­¦é™¢æ¦‚å†µ</a>
                    <a href="#" class="nav-link">å¸ˆèµ„é˜Ÿä¼</a>
                    <a href="#" class="nav-link">è”ç³»æˆ‘ä»¬</a>
                </div>
            </div>
        </div>
    </nav>

    <!-- ä¸»ä½“å†…å®¹ -->
    <main class="pt-24 pb-12 max-w-7xl mx-auto px-4">
        <!-- æœç´¢åŒºåŸŸ -->
        <div class="mb-8">
            <div class="flex gap-2">
                <input id="searchInput" type="text" placeholder="æœç´¢æ•™å¸ˆ..." 
                       class="flex-1 px-4 py-3 border rounded-lg focus:outline-none focus:ring-2 focus:ring-[var(--button-primary)]">
                <button onclick="filterTeachers()" class="px-6 py-3 bg-[var(--button-primary)] text-white rounded-lg hover:bg-[#0077ed]">
                    æœç´¢
                </button>
                <button id="advancedToggle" class="px-4 py-2 border rounded-lg hover:bg-gray-50">
                    é«˜çº§æœç´¢
                </button>
            </div>
            
            <!-- é«˜çº§æœç´¢ -->
            <div id="advancedSearch" class="mt-4 hidden bg-white p-4 rounded-lg shadow-sm">
                <div class="grid grid-cols-1 md:grid-cols-3 gap-4">
                    <select id="collegeSelect" class="border rounded p-2">
                        <option value="">æ‰€æœ‰å­¦é™¢</option>
                        <option>åŒ»å­¦é™¢</option>
                        <option>å¸ˆèŒƒå­¦é™¢</option>
                        <option>ä¿¡æ¯æŠ€æœ¯å­¦é™¢</option>
                    </select>
                    <select id="departmentSelect" class="border rounded p-2">
                        <option value="">æ‰€æœ‰è¡Œæ”¿å•ä½</option>
                        <option>æ•™åŠ¡å¤„</option>
                        <option>å­¦ç”Ÿå¤„</option>
                        <option>ç§‘ç ”å¤„</option>
                    </select>
                    <select id="genderSelect" class="border rounded p-2">
                        <option value="">æ‰€æœ‰æ€§åˆ«</option>
                        <option>ç”·</option>
                        <option>å¥³</option>
                    </select>
                </div>
            </div>
            
            <!-- æœç´¢ç»“æœç»Ÿè®¡ -->
            <div class="mt-8 font-bold text-sm text-gray-500">
                æ‰¾åˆ°çº¦ <span id="resultCount" class="text-[var(--button-primary)]">0</span> æ¡ç»“æœï¼ˆç”¨æ—¶ <span id="searchTime" class="text-[var(--button-primary)]">0.00</span> ç§’ï¼‰
            </div>
        </div>

        <!-- æ•™å¸ˆå¡ç‰‡å®¹å™¨ -->
        <div id="teacherContainer" class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6 mb-8"></div>

        <!-- åˆ†é¡µ -->
<!-- åˆ†é¡µåŒºåŸŸ -->

<div class="flex flex-col md:flex-row justify-center items-center gap-4 mt-20">
    <!-- åŸºç¡€åˆ†é¡µæ§ä»¶ -->
    <div class="flex items-center gap-2">
        <button 
            id="prevPage" 
            class="px-4 py-2 rounded-full border border-gray-300 hover:bg-gray-100 
                   disabled:opacity-50 disabled:hover:bg-white"
        >
            â† ä¸Šä¸€é¡µ
        </button>
        
        <div class="flex items-center gap-1">
            <input 
                id="pageInput" 
                type="number" 
                min="1" 
                class="w-16 px-2 py-1 text-center border rounded 
                       focus:outline-none focus:ring-2 focus:ring-[var(--button-primary)]"
            >
            <span>/</span>
            <span id="totalPages" class="px-2 py-1">1</span>
        </div>

        <button 
            id="nextPage" 
            class="px-4 py-2 rounded-full border border-gray-300 hover:bg-gray-100 
                   disabled:opacity-50 disabled:hover:bg-white"
        >
            ä¸‹ä¸€é¡µ â†’
        </button>
    </div>

    <!-- å¿«é€Ÿè·³è½¬ -->
    <div class="flex items-center gap-2">
        <button 
            id="jumpButton" 
            class="px-4 py-2 bg-[var(--button-primary)] text-white rounded-full 
                   hover:bg-[#0077ed] focus:outline-none"
        >
            è·³è½¬
        </button>
    </div>
</div>
    </main>
<!-- åœ¨é¡µè„šä¸Šæ–¹æ·»åŠ æ¶ˆæ¯æç¤ºåŒºåŸŸ -->
<div id="toastContainer" class="fixed bottom-8 right-8 space-y-4 hidden"></div>
    <!-- åº•éƒ¨ -->
    <footer class="bg-white border-t mt-12">
        <div class="max-w-7xl mx-auto px-4 py-6 text-center text-gray-500">
            <p>è¥„é˜³èŒä¸šæŠ€æœ¯å­¦é™¢ Â© 2023 ç‰ˆæƒæ‰€æœ‰</p>
            <p>åœ°å€ï¼šæ¹–åŒ—çœè¥„é˜³å¸‚è¥„åŸåŒºéš†ä¸­è·¯18å·</p>
        </div>
    </footer>

    <script>
// å…¨å±€é…ç½®
const CONFIG = {
    pageSize: 12,
    jsonPath: './teacher.json',
    defaultAvatar: './img/teachers/default.jpg'
};

// å…¨å±€çŠ¶æ€
const STATE = {
    currentPage: 1,
    teachers: [],
    filteredTeachers: [],
    isLoading: false,
    isError: false
};

// é¡µé¢åˆå§‹åŒ–
async function initialize() {
    try {
        showLoading();
        await loadTeachers();
        setupEventListeners();
        
        // å¤„ç†URLå‚æ•°
        const urlParams = new URLSearchParams(window.location.search);
        const searchQuery = urlParams.get('q') || '';
        document.getElementById('searchInput').value = searchQuery;
        
        filterTeachers(true);
    } catch (error) {
        handleLoadError(error);
    } finally {
        hideLoading();
    }
}

// æ•°æ®åŠ è½½
async function loadTeachers() {
    try {
        const response = await fetch(CONFIG.jsonPath);
        if (!response.ok) throw new Error(`HTTP ${response.status}`);
        const data = await response.json();
        
        // æ•°æ®æ ¡éªŒ
        if (!data?.teachers?.length) throw new Error('æ•™å¸ˆæ•°æ®ä¸ºç©º');
        
        STATE.teachers = data.teachers.map(teacher => ({
            ...teacher,
            avatar: teacher.avatar || CONFIG.defaultAvatar
        }));
        
    } catch (error) {
        console.error('æ•°æ®åŠ è½½å¤±è´¥:', error);
        throw error;
    }
}

// äº‹ä»¶ç›‘å¬å™¨è®¾ç½®
function setupEventListeners() {
    // æœç´¢è¾“å…¥é˜²æŠ–
    let timeout;
    const searchInput = document.getElementById('searchInput');
    
    // è¾“å…¥é˜²æŠ–
    searchInput.addEventListener('input', () => {
        clearTimeout(timeout);
        timeout = setTimeout(() => filterTeachers(true), 300);
    });

    // å›è½¦æœç´¢
    searchInput.addEventListener('keypress', (e) => {
        if (e.key === 'Enter') {
            e.preventDefault();
            filterTeachers(true);
        }
    });

    // é«˜çº§æœç´¢åˆ‡æ¢
    document.getElementById('advancedToggle').addEventListener('click', () => {
        const advSearch = document.getElementById('advancedSearch');
        advSearch.classList.toggle('hidden');
    });

    // é«˜çº§ç­›é€‰
    document.querySelectorAll('#advancedSearch select').forEach(select => {
        select.addEventListener('change', () => filterTeachers(true));
    });

    // åˆ†é¡µæ§åˆ¶
    setupPaginationControls();
}

// åˆ†é¡µæ§åˆ¶é€»è¾‘
function setupPaginationControls() {
    document.getElementById('prevPage').addEventListener('click', () => {
        if (STATE.currentPage > 1) {
            STATE.currentPage--;
            filterTeachers(false);
        }
    });

    document.getElementById('nextPage').addEventListener('click', () => {
        const totalPages = Math.ceil(STATE.filteredTeachers.length / CONFIG.pageSize);
        if (STATE.currentPage < totalPages) {
            STATE.currentPage++;
            filterTeachers(false);
        }
    });

    document.getElementById('jumpButton').addEventListener('click', () => {
        handlePageJump();
    });

    document.getElementById('pageInput').addEventListener('keypress', (e) => {
        if (e.key === 'Enter') handlePageJump();
    });

    document.getElementById('pageInput').addEventListener('input', (e) => {
        e.target.value = e.target.value.replace(/[^0-9]/g, '');
    });
}

// åˆ†é¡µè·³è½¬å¤„ç†
function handlePageJump() {
    const pageInput = document.getElementById('pageInput');
    const pageNumber = parseInt(pageInput.value, 10);
    const totalPages = Math.ceil(STATE.filteredTeachers.length / CONFIG.pageSize);
    
    if (pageNumber >= 1 && pageNumber <= totalPages) {
        STATE.currentPage = pageNumber;
        filterTeachers(false);
    } else {
        pageInput.value = STATE.currentPage;
        showToast(`è¯·è¾“å…¥1-${totalPages}ä¹‹é—´çš„é¡µç `, 'warning');
    }
}

// æœç´¢è¿‡æ»¤é€»è¾‘
function filterTeachers(resetPage = true) {
    if (STATE.isError) return;

    const searchTerm = document.getElementById('searchInput').value.toLowerCase();
    const college = document.getElementById('collegeSelect').value;
    const department = document.getElementById('departmentSelect').value;
    const gender = document.getElementById('genderSelect').value;

    const startTime = performance.now();
    
    // è¿‡æ»¤é€»è¾‘
    STATE.filteredTeachers = STATE.teachers.filter(teacher => {
        const nameMatch = teacher.name.toLowerCase().includes(searchTerm);
        const introMatch = teacher.intro.toLowerCase().includes(searchTerm);
        return (nameMatch || introMatch) &&
            (!college || teacher.college === college) &&
            (!department || teacher.department === department) &&
            (!gender || teacher.gender === gender);
    });

    // æ›´æ–°ç»Ÿè®¡
    document.getElementById('resultCount').textContent = STATE.filteredTeachers.length;
    document.getElementById('searchTime').textContent = 
        (performance.now() - startTime).toFixed(2);

    // é‡ç½®åˆ†é¡µ
    if (resetPage) {
        STATE.currentPage = 1;
        document.getElementById('pageInput').value = 1;
    }

    updatePagination();
    renderTeachers();
}

// åˆ†é¡µçŠ¶æ€æ›´æ–°
function updatePagination() {
    const totalPages = Math.ceil(STATE.filteredTeachers.length / CONFIG.pageSize);
    document.getElementById('totalPages').textContent = totalPages;
    document.getElementById('pageInput').value = STATE.currentPage;
    
    document.getElementById('prevPage').disabled = STATE.currentPage === 1;
    document.getElementById('nextPage').disabled = STATE.currentPage === totalPages;
}

// æ¸²æŸ“æ•™å¸ˆå¡ç‰‡
function renderTeachers() {
    const container = document.getElementById('teacherContainer');
    const start = (STATE.currentPage - 1) * CONFIG.pageSize;
    const end = start + CONFIG.pageSize;
    const teachersToShow = STATE.filteredTeachers.slice(start, end);
    const searchTerm = document.getElementById('searchInput').value.toLowerCase();

    if (!teachersToShow.length) {
        container.innerHTML = `
            <div class="col-span-full text-center py-12">
                <div class="text-gray-400 text-2xl mb-4">ğŸ” æ²¡æœ‰æ‰¾åˆ°åŒ¹é…çš„æ•™å¸ˆ</div>
                <button onclick="clearSearch()" 
                    class="px-4 py-2 bg-blue-100 text-blue-600 rounded-lg hover:bg-blue-200 transition-colors">
                    âœ• æ¸…é™¤æœç´¢æ¡ä»¶
                </button>
            </div>`;
        return;
    }

    container.innerHTML = teachersToShow.map(teacher => `
        <div class="bg-white rounded-xl shadow-md p-4 relative card-hover">
            <div class="aspect-[3/4] overflow-hidden rounded-lg mb-4 bg-gray-100">
                <img src="${teacher.avatar}" 
                     loading="lazy"
                     class="w-full h-full object-cover hover:scale-105 transition-transform duration-300"
                     alt="${teacher.name}ç…§ç‰‡">
            </div>
            <h3 class="text-xl font-bold mb-2">${highlightText(teacher.name, searchTerm)}</h3>
            <div class="text-sm text-gray-500 mb-2">
                <span>${teacher.department}</span> | 
                <span>${teacher.college}</span>
            </div>
            <div class="flex flex-wrap gap-2 mb-3">
                ${teacher.tags.map(tag => `
                    <span class="px-2 py-1 bg-blue-50 text-blue-600 text-xs rounded-full">
                        ${tag}
                    </span>
                `).join('')}
            </div>
            <p class="text-sm text-gray-600 line-clamp-3 mb-4">
                ${highlightText(teacher.intro, searchTerm)}
            </p>
            <a href="${teacher.link}" 
               class="inline-block w-full text-center py-2 bg-blue-100 text-blue-600 rounded-lg hover:bg-blue-200 transition-colors">
               æŸ¥çœ‹è¯¦æƒ… â†’
            </a>
        </div>
    `).join('');
}

// å·¥å…·å‡½æ•°
function highlightText(text, term) {
    return term ? text.replace(new RegExp(term, 'gi'), '<mark>$&</mark>') : text;
}

function clearSearch() {
    document.getElementById('searchInput').value = '';
    document.getElementById('collegeSelect').value = '';
    document.getElementById('departmentSelect').value = '';
    document.getElementById('genderSelect').value = '';
    filterTeachers(true);
}

// å…¨å±€æœç´¢è”åŠ¨
function handleGlobalSearch() {
    const searchInput = document.getElementById('globalSearch');
    const keyword = searchInput.value.trim();
    if (keyword) {
        window.location.href = `all.html?q=${encodeURIComponent(keyword)}`;
    }
}

// åŠ è½½çŠ¶æ€ç®¡ç†
function showLoading() {
    document.getElementById('loadingOverlay').classList.remove('hidden');
}

function hideLoading() {
    document.getElementById('loadingOverlay').classList.add('hidden');
}

// é”™è¯¯å¤„ç†
function handleLoadError(error) {
    STATE.isError = true;
    document.getElementById('teacherContainer').innerHTML = `
        <div class="col-span-full text-center py-12">
            <div class="text-red-500 text-2xl mb-4">âš ï¸ æ•°æ®åŠ è½½å¤±è´¥</div>
            <div class="text-sm text-gray-400 mb-4">${error.message}</div>
            <button onclick="window.location.reload()" 
                    class="px-4 py-2 bg-red-100 text-red-500 rounded-lg hover:bg-red-200">
                é‡æ–°åŠ è½½
            </button>
        </div>`;
}

// æ¶ˆæ¯æç¤º
function showToast(message, type = 'info') {
    const toast = document.createElement('div');
    toast.className = `px-4 py-2 rounded-lg ${{
        success: 'bg-green-100 text-green-700',
        error: 'bg-red-100 text-red-700',
        info: 'bg-blue-100 text-blue-700'
    }[type]}`;
    toast.textContent = message;
    
    const container = document.getElementById('toastContainer');
    container.appendChild(toast);
    setTimeout(() => toast.remove(), 3000);
}

// å¯åŠ¨åˆå§‹åŒ–
document.addEventListener('DOMContentLoaded', initialize);
    </script>
</body>
</html>